#! /usr/bin/env bash


_is_darwin() {
    [[ "$#" -eq 0 ]] && [[ "$(uname -s)" == "Darwin" ]]
}

_is_linux() {
    [[ "$#" -eq 0 ]] && [[ "$(uname -s)" == "Linux" ]]
}

_is_termux() {
    _is_linux && [[ "$HOME" =~ "com.termux/files/home" ]]
}

BASE_URL="$(location https://github.com/v2ray/v2ray-core/releases/latest | sed 's/tag/download/g')"

if _is_darwin;then 
    echo "$BASE_URL/v2ray-macos.zip"
    exit
fi

if _is_termux;then
    echo "$BASE_URL/v2ray-linux-arm64.zip"
    exit
fi

if _is_linux;then
    echo "$BASE_URL/v2ray-linux-64.zip"
    exit
fi
